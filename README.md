## プログラムの実装の説明
このプログラムは、注文データを受け取り、軽減税率と値引きのルールを適用して最終的な合計金額を計算するものです。  
プログラムは、ドメイン駆動設計（DDD）の設計思想を取り入れて設計されており、  
ディレクトリ構造は以下の3つの層で構成されています：
- プレゼンテーション層：ユーザーインターフェースの管理を行い、入力と出力の操作を担当します。  
ユーザーからの注文データの入力と最終的な合計金額の出力がここで行われます。
- ワークフロー層：処理の流れやビジネスロジックの実行順序を制御する役割を担当します。  
注文データを受け取り、ドメイン層を通じて必要な計算を行い、最終的な合計金額をプレゼンテーション層に渡す役割を担います。
- ドメイン層：仕様に対応したオブジェクトの表現と、ビジネスロジックの実装を担当します。  
注文データに関連するビジネスルールと軽減税率や値引きのルールが実装がここで行われます。

以下の3つの設問を記載してください。

### プログラムの実行方法

以下の手順でプログラムを実行できます。
1. node_modulesのインストールを行う
```sh
$ npm install
```
2. プログラムを実行する
```sh
$ npm run start
```
3. 注文データを入力して最終的な合計金額を出力する  
例として`DTDD200:BTDD300`を入力すると、486が出力される

4. プログラムを終了する  
linuxの場合はCtrl + Cを入力する

### 
1. 仕様の明確化  
ドメイン駆動設計の考えを取り入れて、ドメインモデルの定義の中で仕様を表現しています。  
仕様がすべてこのドメイン層に閉じているので、ドキュメントとしての役割を果たすこともできます。  
2. 変更に強い設計及びディレクトリ構造  
クリーンアーキテクチャを参考にして、各層の責務を明確に分離しました。  
そうすることで処理の流れを追いやすくなり、層内の変更が他の層へ与える影響を抑えることもできます。  
また、ドメインに関しても他の層からの変更の影響を受けないため、仕様の実装箇所が安全に守られることが期待できます。  
3. ユニットテストの効率化
処理を細かいロジックに分割し、また一部関数型プログラミングを採用することで、各関数を独立してテストできるようになります。  
これにより、個々の関数が予期した通りに動作するかを詳細に検証でき、全体としてのテストの網羅性が向上します。  
4. ソースコードの可読性向上
一部関数型プログラミングを採用し、for文やif文を極力使わず関数の組み合わせで処理を行っています。  
これにより、処理の流れが直感的に理解しやすくなり、ソースコードの可読性が向上します。

### 
1. ワークフローの概念を取り入れた設計
ワークフローの概念を取り入れて、ドメインモデルの操作の流れを記述することで、ビジネスロジックの流れを明確にしました。    
それに伴い、個々のドメインモデルに対する拡張も容易となります。  
2. データの不変性の担保
関数型プログラミングでは、参照透過性により関数の入力と出力の関係が一意に定まるため、データの不変性が担保されます。  
実装に取り入れることにより、データの状態が変化することによる副作用が発生しにくくなります。
3. 型安全性の考慮
型安全性を意識しており、種別の追加等の変更時にコンパイルエラーで修正箇所を検知できます。
4. 「税率未分類の商品」という概念の導入  
「注文商品」から直接「税率別の商品」に分類するのではなく、一体資産かそうでないかのを表現した「税率未分類の商品」ドメインを導入することで、    
よりドメインモデルの責務を明確化し全体的な処理の複雑さを抑えています。  



